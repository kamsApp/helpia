<mat-horizontal-stepper linear #stepper>
  <mat-step [stepControl]="identityFormGroup" errorMessage="Champs obligatoires.">
    <form [formGroup]="identityFormGroup" layout="column" layout-align="center center">
      <ng-template matStepperIcon="edit">
        <mat-icon>check</mat-icon>
      </ng-template>
      <ng-template matStepLabel>Identitié</ng-template>
      <mat-form-field appearance="outline" class="width-80">
        <mat-label>Nom</mat-label>
        <input matInput formControlName="lastName" type="text"/>
        <mat-error>
          {{required}}
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" class="width-80">
        <mat-label>Prénom</mat-label>
        <input matInput formControlName="firstName" type="text"/>
        <mat-error>
          {{required}}
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" class="width-80">
        <mat-label>Nombre de personnes dans le foyer</mat-label>
        <input matInput formControlName="numberPersons" type="number"/>
        <mat-error>
          {{required}}
        </mat-error>
      </mat-form-field>


      <div>
        <button mat-flat-button color="primary" matStepperNext>Suivant</button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="adressFormGroup" errorMessage="Champs obligatoires.">
    <form [formGroup]="adressFormGroup" layout="column" layout-align="center center">
      <ng-template matStepperIcon="edit">
        <mat-icon>check</mat-icon>
      </ng-template>
      <ng-template matStepLabel>Adresse</ng-template>

      <mat-form-field appearance="outline" class="width-80">
        <mat-label>Adresse</mat-label>
        <input matInput formControlName="address" />
        <mat-error>
          {{required}}
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" class="width-80">
        <mat-label>Complément d'adresse</mat-label>
        <input matInput formControlName="complAddress"/>
      </mat-form-field>
      <table class="width-80" cellspacing="0">
        <tr>
          <td>
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Code postal</mat-label>
              <input matInput formControlName="zipCode" type="number"/>
              <mat-error>
                {{required}}
              </mat-error>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Ville</mat-label>
              <input matInput formControlName="city" type="text"/>
              <mat-error>
                {{required}}
              </mat-error>
            </mat-form-field>
          </td>
        </tr>
      </table>

      <div>
        <button mat-flat-button color="default" matStepperPrevious>Précédent</button>
        <button mat-flat-button color="primary" matStepperNext>Suivant</button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="contactFormGroup" errorMessage="Champs obligatoires.">
    <form [formGroup]="contactFormGroup" layout="column" layout-align="center center" >
      <ng-template matStepperIcon="edit">
        <mat-icon>check</mat-icon>
      </ng-template>
      <ng-template matStepLabel>Contact</ng-template>
      <table class="width-80" cellspacing="0">
        <tr>
          <td>
            <app-countries></app-countries>
          </td>
          <td>
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Téléphone</mat-label>
              <input matInput formControlName="phone" type="tel" >
              <mat-error>
                {{required}}
              </mat-error>
            </mat-form-field>
          </td>
        </tr>
      </table>
      <mat-form-field appearance="outline" class="width-80">
        <mat-label>E-mail</mat-label>
        <input matInput formControlName="email" type="email">
        <mat-error>
          {{required}}
        </mat-error>
        <mat-error *ngIf="contactFormGroup.hasError('email')">
          e-mail invalide
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" class="width-80">
        <mat-label>Mot de passe</mat-label>
        <input matInput formControlName="password" type="password">
        <mat-error>
          {{required}}
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" class="width-80">
        <mat-label>Confirmer le mot de passe</mat-label>
        <input matInput formControlName="confirmPassword" type="password"/>
        <mat-error>
          {{required}}
        </mat-error>
      </mat-form-field>

      <div>
        <button mat-button (click)="stepper.reset()">Réinitialiser</button>
        <button mat-button matStepperPrevious>Précédent</button>
        <button mat-flat-button color="primary" matStepperNext>Envoyer</button>
      </div>
    </form>
  </mat-step>
</mat-horizontal-stepper>


